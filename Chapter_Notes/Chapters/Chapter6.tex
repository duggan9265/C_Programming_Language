% ------------------ Chapter 6: Loops ----------------------------------

\section{Chapter 6 Notes: Loops}

\noindent Chapter 5 covered C´s selection statements, if and switch. This chapter introduces C´s 
iteration statements, which allows one to set up loops.

\noindent A loop is a statement whose job is to repeatedly execute some other statement termed
the loop body. In C every loop has a controlling statement, and each time the loop body is executed
(termed an iteration of the loop), the controlling statement is evaluated. If the expression is true, 
that is, has a value that is not 0, the loop continues to execute.

\noindent C provides 3 interation staements: while, do and for. The While statement is used for
loops whose controlling expression is tested before the loop body is tested. The Do staement is used
if the controlling expression is tested after the loop body is executed. The For statemnt is used if
one wants to increment or decrement a counting variable.

\noindent C also has break, continue and goto staements, which are typically used in conjuction with
loops.

\subsection{While Statement}

\noindent This is the most simple and most fundamental statement in C. It has the form \textit{
while (controlling expression) statement}. For example:

    \begin{lstlisting}[caption={While Statement}, label={code:while_statement}]

    while(i<n) /* controlling expression*/
     i=i*2    /* loop body */

\end{lstlisting}

\noindent When  a While statement is executed, its controlling expression is evaluated first. If its 
value is non-zero (true), the loop body is evaluated, and the controlling expression tested again. To have
more than one statement inside the loop body, one can use curly braces:

    \begin{lstlisting}[caption={While Statement Multiple Statements}, label={code:while_statement_mult}]

    while(i>0) {
        printf("T minus %d and counting\n", i);
        i--;
    }

\end{lstlisting}

\noindent A while loop can be used to create an infinite loop via while(1), which executes
forever unless there is a statement that transfers control out of the loop (e.g. break, goto, return)
or calls a function that causes the program to terminate.

\subsection{Do Statement}

\noindent Do statement is essentially a While statement whose controlling expression is tested after
each execution of the loop body.

\begin{lstlisting}[caption={Do Statement}, label={code:do_statement}]

    do (statement) while (expression) ;

\end{lstlisting}

\noindent for example:


\begin{lstlisting}[caption={Do Statement Example}, label={code:do_statement_ex}]

    i = 10;

    do {

        printf("T minus %d and counting\n", i);
        i--
    }   while (i > 0)

\end{lstlisting}

\noindent This has the same output as the while statement given in the While statment section i.e.
the Do statement and While statement are indistinguishable. The main difference is that the body of
a Do statement is always executed at least once, whereas the While statement body may be skipped
entirely depending on the controlling expression.

\subsection{For Loop}

\noindent The for loop has the form for (expr1 ; expr2 ; expr3) statement. For example

\begin{lstlisting}[caption={For Loop}, label={code:for_loop_ex}]

for(i=10 ; i>0 ; i--)
    printf("T minus %d and counting\n", i);

\end{lstlisting}

\noindent When this is executed, i is initialised to 10, the loop executes whilst i is greater than 0 
and i is decremented by 1 each time the loop executes. The body is executed 10 times in all, with i
varying from 10 down to 1. Thus, expr1 is an intialisation step that is performed only once, expr2 
controls loop termination (the loop continues to execute as long as the value of expr2 is non-zero
i.e. true) and expr3 is an operation to be performed at the end of each loop. For loops can omit expr´s
however the semi-colon must always be present e.g.

\begin{lstlisting}[caption={For Loop}, label={code:for_loop_ex}]

i=10;
for(; i>0 ; i--)
    printf("T minus %d and counting\n", i);

\end{lstlisting}

\noindent is valid, as i has been initialised previously. One may want to have two or more intialisation
expressions or one that increments several expressions each time through the loop. This can be achieved via 
a comma expression as the first or third expression in the for loop. Forexample

\begin{lstlisting}[caption={For Loop}, label={code:for_loop_ex}]

i=10;
for(i=1, j=2, k=i+j; k>0 ; k--)
    printf("T minus %d and counting\n", i);

\end{lstlisting}

\noindent where the comma expression is left associative so i is ¨read¨ first.

\subsection{Break Statement}

\noindent The break statement allows one to exit a loop. Further, it can only exit one level of nesting,
so a break in an inner nested loop will break out to the next level loop.

\subsection{Continue Statement}

\noindent Continue statements do not exit a loop or statement, transferring control to a point just 
before the end of a loop. This is in contrast to the break statement which transfers control to a point
past the end of a loop. Thus, with a continue statement, control remains inside the loop. Also, unlike
break statments which can be used in switch statements and loops (while, do, for), the continue 
statement can only be used in the latter. An example usage of the continue statement is:

\begin{lstlisting}[caption={Continue Statement}, label={Continue_stat_ex}]

n = 0;
sum = 0;
while (n < 10){
    scanf(%d,&i);
    if (i==0)
        continue;
    sum += i;
    n++;
    /* continue jumps to here */
}

\end{lstlisting}

\noindent Without continue, the above would have to be written such as:

\begin{lstlisting}[caption={Continue Statement 2}, label={Continue_stat_ex2}]

n = 0;
sum = 0;
while (n < 10){
    scanf(%d,&i);
    if (i!=0){
        continue;
    sum += i;
    n++;
    }
}

\end{lstlisting}

\noindent i.e. the if statement would have to contain the body of the loop, so that the statements 
for updating the sum and incrementing n are executed only when the condition is satisfied.

\subsection{goto Statement}

\noindent Both the break and and continue statements are jump statements that transfer control from one
point in the program to another. Both are restricted; break retruns one to a point just after the end of
the closing loop, whereas continue to a point just before the end of the loop. In contrast, the goto 
statement is capable of jumping to any statement in a function, provided that the statement has a label.

\noindent A label is an identifier placed at the beginning of a statement - identifier : statement. A 
statement may have more than one label. The goto statement itself has the form - goto identifier ; .
As an example:

\begin{lstlisting}[caption={goto statement example}, label={goto_ex}]

    for(d = 2; d < n; d++)
        if (n % d == 0)
            goto done;

            done:
            if (d < n)
                printf("%d is divisible by %d\n", n, d);
            else
                printf("%d is prime\n", n, d);


\end{lstlisting}
